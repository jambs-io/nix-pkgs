name: update-nix
concurrency:
  cancel-in-progress: true
  group: nix
on:
  push:
    branches:
      - main
  schedule:
    - cron: '0 * * * *'
jobs:
  update-nix:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      name: clone
    - uses: docker://ghcr.io/fluidattacks/makes:21.11
      name: update
      with:
        args: m . /update nix
    - name: commit
      run: |
        git config user.name 'Kevin Amado'
        git config user.email kamadorueda@gmail.com
        git pull --autostash --progress --rebase --stat origin main
        git add data
        git commit -m "feat(conf): update nix"
        git push
